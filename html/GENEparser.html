<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>GENEparser API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>GENEparser</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from base import Parser # add . for relative import
import subprocess
import os
import numpy as np
import f90nml
from typing import List
from copy import deepcopy

class GENEparser(Parser):
    &#34;&#34;&#34;An I/O parser for GENE

     Attributes
    ----------

    Methods
    -------
    write_input_file
        Writes the inputfile for a single set of parameters.

    read_output_file
        Reads the output file to python format

    &#34;&#34;&#34;
    def __init__(self, base_params_dir):
        &#34;&#34;&#34;
        Generates the base f90nml namelist from the GENE parameters file at base_params_dir.

        Parameters
        ----------
            base_params_dir (string or path): The directory pointing to the base GENE parameters file.
            The base GENE parameters file must contain all parameters necessary for GENE to run.
            Any parameters to be sampled will be inserted into the base parameter file before each run.
            Any value of a sampled parameter in the base file will be ignored. 
        Returns
        -------
            Nothing 
        &#34;&#34;&#34;
        self.base_namelist = f90nml.read(base_params_dir) #odict_keys([&#39;parallelization&#39;, &#39;box&#39;, &#39;in_out&#39;, &#39;general&#39;, &#39;geometry&#39;, &#39;_grp_species_0&#39;, &#39;_grp_species_1&#39;, &#39;units&#39;])
        
        
    def write_input_file(self, params: dict, run_dir):
        &#34;&#34;&#34;
        Write the GENE input file to the run directory specified. 
        
        Parameters
        ----------
            params (dict): The keys store strings of the names of the parameters as specified in the enchanted surrogates *_config.yaml configuration file.
            The values stores floats of the parameter values to be ran in GENE.

            run_dir (string or path): A directory in the machine intended for the run of GENE.  

        &#34;&#34;&#34;
        params_keys = list(params.keys())
        params_values = list(params.values())
        patch = {}

        for key, value in zip(params_keys,params_values):
            group_name, variable_name = key.split(&#39;-&#39;)
            if list(patch.keys()).count(group_name) &gt; 0:
                patch[group_name][variable_name] = value
            else: patch[group_name] = {variable_name:value}

        namelist = self.base_namelist
        patch = f90nml.namelist.Namelist(patch)
        namelist.patch(patch)
        
        f90nml.write(namelist, os.path.join(run_dir,&#39;parameters&#39;))

    def read_output_file(self, run_dir: str):
        ky_spectrum_file_path = os.path.join(run_dir, self.ky_spectrum_file)
        growth_rate_freq_file_path = os.path.join(
            run_dir, self.growth_rate_freq_file)
        flux_spectrum_file_path = os.path.join(
            run_dir, self.flux_spectrum_file)

        self.ky_spectrum = np.genfromtxt(
            ky_spectrum_file_path, dtype=None, skip_header=2)
        self.eigenvalue_spectrum = np.genfromtxt(
            growth_rate_freq_file_path, dtype=None, skip_header=2)
        self.flux_spectrums = self.parse_flux_spectrum(flux_spectrum_file_path)
        self.fluxes = []
        for species in self.flux_spectrums:
            energy_flux = species[:, 1].sum()
            particle_flux = species[:, 0].sum()
            self.fluxes.extend([energy_flux, particle_flux])
        # self.fluxes = [flux_spec.sum() for flux_spec in self.flux_spectrums]

    def parse_flux_spectrum(self, file_path) -&gt; List[np.ndarray]:
        data_sets = []
        current_data_set = []
        with open(file_path, &#39;r&#39;) as file:
            for line in file:
                # Check if the line is a species marker indicating
                # a new data set
                if line.startswith(&#39; species =&#39;):
                    # If we already have data collected, convert it to a NumPy
                    # array and reset for the next set
                    if current_data_set:
                        data_sets.append(
                            np.array(current_data_set, dtype=float))
                        current_data_set = []
                    # Skip the next line which contains column names
                    next(file)
                else:
                    # Collect data lines into the current set
                    data_values = line.split()
                    if data_values:  # Ensure it&#39;s not an empty line
                        current_data_set.append(
                            [float(value) for value in data_values])
            # Don&#39;t forget to add the last set if the file ends without
            # a new marker
            if current_data_set:
                data_sets.append(np.array(current_data_set, dtype=float))
        return data_sets

    def input_dict(self, ) -&gt; dict: 
        parameters_dict = self.default_ga_input()

        # BASED ON ASTRA INTERFACE FILE, ALL SET BEFORE THE RADIAL LOOP 
        parameters_dict[&#34;KYGRID_MODEL&#34;][&#39;default&#39;] = &#34;4&#34;
        parameters_dict[&#34;SAT_RULE&#34;][&#39;default&#39;] = &#34;2&#34;
        parameters_dict[&#34;XNU_MODEL&#34;][&#39;default&#39;] = &#34;3&#34; # SAT_RULE 2
        parameters_dict[&#34;ALPHA_ZF&#34;] = {&#39;interface_parameter&#39;: &#39;tglf_alpha_zf_in&#39;, &#39;default&#39;: &#34;1&#34;} # SAT_RULE 2
        
        parameters_dict[&#39;USE_BPER&#39;][&#39;default&#39;] = &#34;.True.&#34;
        parameters_dict[&#39;USE_MHD_RULE&#39;][&#39;default&#39;] = &#34;.Frue.&#34;

        parameters_dict[&#39;NMODES&#39;][&#39;default&#39;] = str(int(parameters_dict[&#39;NS&#39;][&#39;default&#39;]) + 2)
        parameters_dict[&#39;NBASIS_MAX&#39;][&#39;default&#39;] = 6
        parameters_dict[&#39;NKY&#39;][&#39;default&#39;] = 19
        parameters_dict[&#39;UNITS&#39;][&#39;default&#39;] = &#39;CGYRO&#39;

        parameters_dict[&#39;VPAR_SHEAR_MODEL&#39;][&#39;default&#39;] = 1
        

   
        return parameters_dict
    
if __name__ == &#39;__main__&#39;:
    bounds = [[0.1, 300],[2,3.5],[4,6.8]]
    params = {&#39;box-kymin&#39;:100.1, &#39;_grp_species_0-omt&#39;: 2.75, &#39;_grp_species_1-omt&#39;:5.1, &#39;_grp_species_1-dens&#39;:9000}
    parser = GENEparser(base_params_dir=&#39;/home/djdaniel/Downloads/parameters&#39;)
    parser.write_input_file(params,run_dir=os.getcwd())</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="GENEparser.GENEparser"><code class="flex name class">
<span>class <span class="ident">GENEparser</span></span>
<span>(</span><span>base_params_dir)</span>
</code></dt>
<dd>
<div class="desc"><p>An I/O parser for GENE</p>
<h2 id="attributes">Attributes</h2>
<h2 id="methods">Methods</h2>
<p>write_input_file
Writes the inputfile for a single set of parameters.</p>
<p>read_output_file
Reads the output file to python format</p>
<p>Generates the base f90nml namelist from the GENE parameters file at base_params_dir.</p>
<h2 id="parameters">Parameters</h2>
<pre><code>base_params_dir (string or path): The directory pointing to the base GENE parameters file.
The base GENE parameters file must contain all parameters necessary for GENE to run.
Any parameters to be sampled will be inserted into the base parameter file before each run.
Any value of a sampled parameter in the base file will be ignored.
</code></pre>
<h2 id="returns">Returns</h2>
<pre><code>Nothing
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class GENEparser(Parser):
    &#34;&#34;&#34;An I/O parser for GENE

     Attributes
    ----------

    Methods
    -------
    write_input_file
        Writes the inputfile for a single set of parameters.

    read_output_file
        Reads the output file to python format

    &#34;&#34;&#34;
    def __init__(self, base_params_dir):
        &#34;&#34;&#34;
        Generates the base f90nml namelist from the GENE parameters file at base_params_dir.

        Parameters
        ----------
            base_params_dir (string or path): The directory pointing to the base GENE parameters file.
            The base GENE parameters file must contain all parameters necessary for GENE to run.
            Any parameters to be sampled will be inserted into the base parameter file before each run.
            Any value of a sampled parameter in the base file will be ignored. 
        Returns
        -------
            Nothing 
        &#34;&#34;&#34;
        self.base_namelist = f90nml.read(base_params_dir) #odict_keys([&#39;parallelization&#39;, &#39;box&#39;, &#39;in_out&#39;, &#39;general&#39;, &#39;geometry&#39;, &#39;_grp_species_0&#39;, &#39;_grp_species_1&#39;, &#39;units&#39;])
        
        
    def write_input_file(self, params: dict, run_dir):
        &#34;&#34;&#34;
        Write the GENE input file to the run directory specified. 
        
        Parameters
        ----------
            params (dict): The keys store strings of the names of the parameters as specified in the enchanted surrogates *_config.yaml configuration file.
            The values stores floats of the parameter values to be ran in GENE.

            run_dir (string or path): A directory in the machine intended for the run of GENE.  

        &#34;&#34;&#34;
        params_keys = list(params.keys())
        params_values = list(params.values())
        patch = {}

        for key, value in zip(params_keys,params_values):
            group_name, variable_name = key.split(&#39;-&#39;)
            if list(patch.keys()).count(group_name) &gt; 0:
                patch[group_name][variable_name] = value
            else: patch[group_name] = {variable_name:value}

        namelist = self.base_namelist
        patch = f90nml.namelist.Namelist(patch)
        namelist.patch(patch)
        
        f90nml.write(namelist, os.path.join(run_dir,&#39;parameters&#39;))

    def read_output_file(self, run_dir: str):
        ky_spectrum_file_path = os.path.join(run_dir, self.ky_spectrum_file)
        growth_rate_freq_file_path = os.path.join(
            run_dir, self.growth_rate_freq_file)
        flux_spectrum_file_path = os.path.join(
            run_dir, self.flux_spectrum_file)

        self.ky_spectrum = np.genfromtxt(
            ky_spectrum_file_path, dtype=None, skip_header=2)
        self.eigenvalue_spectrum = np.genfromtxt(
            growth_rate_freq_file_path, dtype=None, skip_header=2)
        self.flux_spectrums = self.parse_flux_spectrum(flux_spectrum_file_path)
        self.fluxes = []
        for species in self.flux_spectrums:
            energy_flux = species[:, 1].sum()
            particle_flux = species[:, 0].sum()
            self.fluxes.extend([energy_flux, particle_flux])
        # self.fluxes = [flux_spec.sum() for flux_spec in self.flux_spectrums]

    def parse_flux_spectrum(self, file_path) -&gt; List[np.ndarray]:
        data_sets = []
        current_data_set = []
        with open(file_path, &#39;r&#39;) as file:
            for line in file:
                # Check if the line is a species marker indicating
                # a new data set
                if line.startswith(&#39; species =&#39;):
                    # If we already have data collected, convert it to a NumPy
                    # array and reset for the next set
                    if current_data_set:
                        data_sets.append(
                            np.array(current_data_set, dtype=float))
                        current_data_set = []
                    # Skip the next line which contains column names
                    next(file)
                else:
                    # Collect data lines into the current set
                    data_values = line.split()
                    if data_values:  # Ensure it&#39;s not an empty line
                        current_data_set.append(
                            [float(value) for value in data_values])
            # Don&#39;t forget to add the last set if the file ends without
            # a new marker
            if current_data_set:
                data_sets.append(np.array(current_data_set, dtype=float))
        return data_sets

    def input_dict(self, ) -&gt; dict: 
        parameters_dict = self.default_ga_input()

        # BASED ON ASTRA INTERFACE FILE, ALL SET BEFORE THE RADIAL LOOP 
        parameters_dict[&#34;KYGRID_MODEL&#34;][&#39;default&#39;] = &#34;4&#34;
        parameters_dict[&#34;SAT_RULE&#34;][&#39;default&#39;] = &#34;2&#34;
        parameters_dict[&#34;XNU_MODEL&#34;][&#39;default&#39;] = &#34;3&#34; # SAT_RULE 2
        parameters_dict[&#34;ALPHA_ZF&#34;] = {&#39;interface_parameter&#39;: &#39;tglf_alpha_zf_in&#39;, &#39;default&#39;: &#34;1&#34;} # SAT_RULE 2
        
        parameters_dict[&#39;USE_BPER&#39;][&#39;default&#39;] = &#34;.True.&#34;
        parameters_dict[&#39;USE_MHD_RULE&#39;][&#39;default&#39;] = &#34;.Frue.&#34;

        parameters_dict[&#39;NMODES&#39;][&#39;default&#39;] = str(int(parameters_dict[&#39;NS&#39;][&#39;default&#39;]) + 2)
        parameters_dict[&#39;NBASIS_MAX&#39;][&#39;default&#39;] = 6
        parameters_dict[&#39;NKY&#39;][&#39;default&#39;] = 19
        parameters_dict[&#39;UNITS&#39;][&#39;default&#39;] = &#39;CGYRO&#39;

        parameters_dict[&#39;VPAR_SHEAR_MODEL&#39;][&#39;default&#39;] = 1
        

   
        return parameters_dict</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>base.Parser</li>
<li>abc.ABC</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="GENEparser.GENEparser.input_dict"><code class="name flex">
<span>def <span class="ident">input_dict</span></span>(<span>self) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def input_dict(self, ) -&gt; dict: 
    parameters_dict = self.default_ga_input()

    # BASED ON ASTRA INTERFACE FILE, ALL SET BEFORE THE RADIAL LOOP 
    parameters_dict[&#34;KYGRID_MODEL&#34;][&#39;default&#39;] = &#34;4&#34;
    parameters_dict[&#34;SAT_RULE&#34;][&#39;default&#39;] = &#34;2&#34;
    parameters_dict[&#34;XNU_MODEL&#34;][&#39;default&#39;] = &#34;3&#34; # SAT_RULE 2
    parameters_dict[&#34;ALPHA_ZF&#34;] = {&#39;interface_parameter&#39;: &#39;tglf_alpha_zf_in&#39;, &#39;default&#39;: &#34;1&#34;} # SAT_RULE 2
    
    parameters_dict[&#39;USE_BPER&#39;][&#39;default&#39;] = &#34;.True.&#34;
    parameters_dict[&#39;USE_MHD_RULE&#39;][&#39;default&#39;] = &#34;.Frue.&#34;

    parameters_dict[&#39;NMODES&#39;][&#39;default&#39;] = str(int(parameters_dict[&#39;NS&#39;][&#39;default&#39;]) + 2)
    parameters_dict[&#39;NBASIS_MAX&#39;][&#39;default&#39;] = 6
    parameters_dict[&#39;NKY&#39;][&#39;default&#39;] = 19
    parameters_dict[&#39;UNITS&#39;][&#39;default&#39;] = &#39;CGYRO&#39;

    parameters_dict[&#39;VPAR_SHEAR_MODEL&#39;][&#39;default&#39;] = 1
    


    return parameters_dict</code></pre>
</details>
</dd>
<dt id="GENEparser.GENEparser.parse_flux_spectrum"><code class="name flex">
<span>def <span class="ident">parse_flux_spectrum</span></span>(<span>self, file_path) ‑> List[numpy.ndarray]</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def parse_flux_spectrum(self, file_path) -&gt; List[np.ndarray]:
    data_sets = []
    current_data_set = []
    with open(file_path, &#39;r&#39;) as file:
        for line in file:
            # Check if the line is a species marker indicating
            # a new data set
            if line.startswith(&#39; species =&#39;):
                # If we already have data collected, convert it to a NumPy
                # array and reset for the next set
                if current_data_set:
                    data_sets.append(
                        np.array(current_data_set, dtype=float))
                    current_data_set = []
                # Skip the next line which contains column names
                next(file)
            else:
                # Collect data lines into the current set
                data_values = line.split()
                if data_values:  # Ensure it&#39;s not an empty line
                    current_data_set.append(
                        [float(value) for value in data_values])
        # Don&#39;t forget to add the last set if the file ends without
        # a new marker
        if current_data_set:
            data_sets.append(np.array(current_data_set, dtype=float))
    return data_sets</code></pre>
</details>
</dd>
<dt id="GENEparser.GENEparser.read_output_file"><code class="name flex">
<span>def <span class="ident">read_output_file</span></span>(<span>self, run_dir: str)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def read_output_file(self, run_dir: str):
    ky_spectrum_file_path = os.path.join(run_dir, self.ky_spectrum_file)
    growth_rate_freq_file_path = os.path.join(
        run_dir, self.growth_rate_freq_file)
    flux_spectrum_file_path = os.path.join(
        run_dir, self.flux_spectrum_file)

    self.ky_spectrum = np.genfromtxt(
        ky_spectrum_file_path, dtype=None, skip_header=2)
    self.eigenvalue_spectrum = np.genfromtxt(
        growth_rate_freq_file_path, dtype=None, skip_header=2)
    self.flux_spectrums = self.parse_flux_spectrum(flux_spectrum_file_path)
    self.fluxes = []
    for species in self.flux_spectrums:
        energy_flux = species[:, 1].sum()
        particle_flux = species[:, 0].sum()
        self.fluxes.extend([energy_flux, particle_flux])
    # self.fluxes = [flux_spec.sum() for flux_spec in self.flux_spectrums]</code></pre>
</details>
</dd>
<dt id="GENEparser.GENEparser.write_input_file"><code class="name flex">
<span>def <span class="ident">write_input_file</span></span>(<span>self, params: dict, run_dir)</span>
</code></dt>
<dd>
<div class="desc"><p>Write the GENE input file to the run directory specified. </p>
<h2 id="parameters">Parameters</h2>
<pre><code>params (dict): The keys store strings of the names of the parameters as specified in the enchanted surrogates *_config.yaml configuration file.
The values stores floats of the parameter values to be ran in GENE.

run_dir (string or path): A directory in the machine intended for the run of GENE.
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def write_input_file(self, params: dict, run_dir):
    &#34;&#34;&#34;
    Write the GENE input file to the run directory specified. 
    
    Parameters
    ----------
        params (dict): The keys store strings of the names of the parameters as specified in the enchanted surrogates *_config.yaml configuration file.
        The values stores floats of the parameter values to be ran in GENE.

        run_dir (string or path): A directory in the machine intended for the run of GENE.  

    &#34;&#34;&#34;
    params_keys = list(params.keys())
    params_values = list(params.values())
    patch = {}

    for key, value in zip(params_keys,params_values):
        group_name, variable_name = key.split(&#39;-&#39;)
        if list(patch.keys()).count(group_name) &gt; 0:
            patch[group_name][variable_name] = value
        else: patch[group_name] = {variable_name:value}

    namelist = self.base_namelist
    patch = f90nml.namelist.Namelist(patch)
    namelist.patch(patch)
    
    f90nml.write(namelist, os.path.join(run_dir,&#39;parameters&#39;))</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="GENEparser.GENEparser" href="#GENEparser.GENEparser">GENEparser</a></code></h4>
<ul class="">
<li><code><a title="GENEparser.GENEparser.input_dict" href="#GENEparser.GENEparser.input_dict">input_dict</a></code></li>
<li><code><a title="GENEparser.GENEparser.parse_flux_spectrum" href="#GENEparser.GENEparser.parse_flux_spectrum">parse_flux_spectrum</a></code></li>
<li><code><a title="GENEparser.GENEparser.read_output_file" href="#GENEparser.GENEparser.read_output_file">read_output_file</a></code></li>
<li><code><a title="GENEparser.GENEparser.write_input_file" href="#GENEparser.GENEparser.write_input_file">write_input_file</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>